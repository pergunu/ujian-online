<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Online - PERGUNU Situbondo</title>
    <!-- Load CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <style>
        /* Fallback jika CSS tidak terload */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #4a6bff, #6c5ce7, #00cec9);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>
    
    <!-- Floating Buttons -->
    <div class="floating-buttons">
        <button class="floating-btn share-btn" title="Bagikan">
            <i class="fas fa-share-alt"></i>
        </button>
        <button class="floating-btn whatsapp-btn" title="Chat Admin">
            <i class="fab fa-whatsapp"></i>
        </button>
        <button class="floating-btn admin-btn" title="Admin Panel">
            <i class="fas fa-cog"></i>
        </button>
        <button class="floating-btn question-bank-btn" title="Bank Soal">
            <i class="fas fa-book"></i>
        </button>
    </div>

    <!-- Main Container -->
   <div class="container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="logo-container">
                <img src="assets/images/logo.png" alt="PERGUNU Situbondo" class="logo">
            </div>
            <div class="welcome-message">
                <h1 id="greeting-text">Selamat Datang di Ujian Online PERGUNU Situbondo</h1>
                <p id="sub-greeting-text">Silakan masukkan kode ujian untuk melanjutkan</p>
            </div>
            <div class="login-form">
                <input type="password" id="exam-code" placeholder="Masukkan Kode Ujian" class="input-field">
                <button id="enter-btn" class="btn-primary pulse">Masuk</button>
            </div>
            <div class="footer-info">
                <p>Dikembangkan oleh Cendhanu Tim Kreator PERGUNU Situbondo</p>
            </div>
        </div>

         <!-- Load JavaScript -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="assets/js/particles-config.js"></script>
    <script src="assets/js/main.js"></script>
    
    <!-- Fallback JS jika file tidak terload -->
    <script>
        // Fungsi dasar jika main.js gagal load
        document.addEventListener('DOMContentLoaded', function() {
            const enterBtn = document.getElementById('enter-btn');
            if (enterBtn) {
                enterBtn.addEventListener('click', function() {
                    const code = document.getElementById('exam-code').value;
                    if (code === '12345') {
                        alert('Kode benar! Aplikasi berfungsi normal.');
                    } else {
                        alert('Kode salah! Coba lagi.');
                    }
                });
            }
            
            // Inisialisasi particles.js
            if (typeof particlesJS !== 'undefined') {
                particlesJS.load('particles-js', 'assets/js/particles-config.json', function() {
                    console.log('Particles loaded');
                });
            }
        });

        <!-- Terms and Conditions -->
        <div id="terms-screen" class="screen">
            <div class="terms-container">
                <h2>Peraturan & Kebijakan Ujian Online</h2>
                <div class="terms-content">
                    <ol>
                        <li>Peserta wajib mengisi data diri dengan benar dan valid.</li>
                        <li>Dilarang keras melakukan kecurangan selama ujian berlangsung.</li>
                        <li>Waktu ujian akan berjalan terus dan tidak dapat dihentikan.</li>
                        <li>Jawaban yang sudah dikirim tidak dapat diubah.</li>
                        <li>Hasil ujian akan langsung diproses setelah waktu habis.</li>
                        <li>Peserta yang melanggar akan didiskualifikasi.</li>
                    </ol>
                </div>
                <div class="terms-checkbox">
                    <input type="checkbox" id="agree-terms">
                    <label for="agree-terms">Saya menyetujui semua peraturan di atas</label>
                </div>
                <button id="continue-btn" class="btn-primary" disabled>Lanjut Ikut Ujian</button>
            </div>
        </div>

        <!-- Participant Form -->
        <div id="participant-form-screen" class="screen">
            <div class="form-container">
                <h2>Formulir Data Peserta</h2>
                <form id="participant-form">
                    <div class="form-group">
                        <label for="fullname">Nama Lengkap:</label>
                        <input type="text" id="fullname" name="fullname" required class="input-field">
                    </div>
                    
                    <div class="form-group">
                        <label>Status:</label>
                        <div class="radio-group">
                            <input type="radio" id="student" name="status" value="pelajar" checked>
                            <label for="student">Pelajar</label>
                            <input type="radio" id="general" name="status" value="umum">
                            <label for="general">Umum</label>
                        </div>
                    </div>
                    
                    <!-- Student Fields -->
                    <div id="student-fields" class="status-fields">
                        <div class="form-group">
                            <label for="school">Nama Sekolah:</label>
                            <input type="text" id="school" name="school" class="input-field">
                        </div>
                        <div class="form-group">
                            <label for="nis">NIS (Nomor Induk Siswa):</label>
                            <input type="number" id="nis" name="nis" class="input-field" pattern="\d*">
                        </div>
                        <div class="form-group">
                            <label>Tujuan Ikut Ujian:</label>
                            <select id="student-purpose" class="input-field">
                                <option value="tugas-sekolah">Tugas Sekolah</option>
                                <option value="tugas-ulangan">Tugas Ulangan</option>
                                <option value="tes-belajar">Tes dan Belajar</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tingkat Sekolah:</label>
                            <div class="radio-group">
                                <input type="radio" id="sd" name="school-level" value="SD">
                                <label for="sd">SD</label>
                                <input type="radio" id="smp" name="school-level" value="SMP">
                                <label for="smp">SMP</label>
                                <input type="radio" id="sma" name="school-level" value="SMA/SMK" checked>
                                <label for="sma">SMA/SMK</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- General Public Fields -->
                    <div id="general-fields" class="status-fields" style="display:none;">
                        <div class="form-group">
                            <label for="address">Alamat:</label>
                            <div class="address-input">
                                <input type="text" id="address" name="address" class="input-field">
                                <button type="button" id="gps-btn" class="btn-secondary">
                                    <i class="fas fa-map-marker-alt"></i> Gunakan GPS
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="whatsapp">Nomor WhatsApp Aktif:</label>
                            <input type="tel" id="whatsapp" name="whatsapp" class="input-field" pattern="[0-9]{10,13}">
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" class="input-field" pattern="[a-z0-9._%+-]+@(gmail|yahoo|hotmail)\.com$">
                        </div>
                        <div class="form-group">
                            <label>Tujuan Ikut Ujian:</label>
                            <select id="general-purpose" class="input-field">
                                <option value="tes-iq">Tes IQ</option>
                                <option value="ujian-cpns">Ujian CPNS/P3K</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" id="save-participant-btn" class="btn-primary">Simpan & Ikut Ujian</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Exam Level Selection -->
        <div id="exam-level-screen" class="screen">
            <div class="level-container">
                <h2>Pilih Tingkat Ujian</h2>
                <div id="student-levels" class="level-options">
                    <h3>Untuk Pelajar</h3>
                    <div class="grade-options">
                        <button class="level-btn" data-grade="IV">Kelas IV</button>
                        <button class="level-btn" data-grade="V">Kelas V</button>
                        <button class="level-btn" data-grade="VI">Kelas VI</button>
                    </div>
                    <div class="grade-options">
                        <button class="level-btn" data-grade="VII">Kelas VII</button>
                        <button class="level-btn" data-grade="VIII">Kelas VIII</button>
                        <button class="level-btn" data-grade="IX">Kelas IX</button>
                    </div>
                    <div class="grade-options">
                        <button class="level-btn" data-grade="X">Kelas X</button>
                        <button class="level-btn" data-grade="XI">Kelas XI</button>
                        <button class="level-btn" data-grade="XII">Kelas XII</button>
                    </div>
                </div>
                
                <div id="general-levels" class="level-options" style="display:none;">
                    <h3>Untuk Umum</h3>
                    <button class="level-btn" data-exam="iq-test">Tes IQ</button>
                    <button class="level-btn" data-exam="cpns-test">Ujian CPNS/P3K</button>
                </div>
                
                <div id="cpns-code-container" style="display:none;">
                    <div class="form-group">
                        <label for="cpns-code">Masukkan Kode Lisensi Ujian CPNS/P3K:</label>
                        <input type="password" id="cpns-code" class="input-field">
                        <button id="verify-cpns-code" class="btn-secondary">Verifikasi</button>
                    </div>
                </div>
                
                <div class="info-box">
                    <p id="periodic-info-text">Informasi berkala akan ditampilkan di sini. Dapat diatur melalui panel admin.</p>
                </div>
            </div>
        </div>

        <!-- Subject Selection -->
        <div id="subject-screen" class="screen">
            <div class="subject-container">
                <h2>Pilih Mata Ujian</h2>
                <div id="student-subjects" class="subject-options">
                    <button class="subject-btn" data-subject="agama">AGAMA</button>
                    <button class="subject-btn" data-subject="ppkn">PPKN</button>
                    <button class="subject-btn" data-subject="sejarah">SEJARAH</button>
                    <button class="subject-btn" data-subject="ipa">IPA</button>
                    <button class="subject-btn" data-subject="ips">IPS</button>
                    <button class="subject-btn" data-subject="matematika">MATEMATIKA</button>
                    <button class="subject-btn" data-subject="bahasa-indonesia">BAHASA INDONESIA</button>
                    <button class="subject-btn" data-subject="bahasa-inggris">BAHASA INGGRIS</button>
                    <button class="subject-btn" data-subject="materi-extra">MATERI EXTRA</button>
                    <button class="subject-btn" data-subject="materi-khusus">MATERI KHUSUS</button>
                </div>
                
                <div id="general-subjects" class="subject-options" style="display:none;">
                    <button class="subject-btn" data-subject="logika">UJIAN LOGIKA</button>
                    <button class="subject-btn" data-subject="cpns">UJIAN CPNS/P3K</button>
                </div>
                
                <button id="start-exam-btn" class="btn-primary" disabled>Mulai Ujian Sekarang</button>
            </div>
        </div>

        <!-- Exam Screen -->
        <div id="exam-screen" class="screen">
            <div class="exam-header">
                <div class="exam-timer">
                    <span id="timer">120:00</span>
                </div>
                <div class="exam-info">
                    <span id="current-question">1</span>/<span id="total-questions">10</span>
                </div>
            </div>
            
            <div class="exam-content">
                <div class="question-container">
                    <div class="question-text" id="question-text">
                        Memuat pertanyaan...
                    </div>
                </div>
                
                <div class="options-container" id="options-container">
                    <!-- Options will be populated here -->
                </div>
                
                <div class="explanation-container" id="explanation-container" style="display:none;">
                    <h4>Penjelasan Jawaban:</h4>
                    <p id="explanation-text"></p>
                </div>
            </div>
            
            <div class="exam-footer">
                <button id="finish-exam-btn" class="btn-danger">Selesaikan Ujian Sekarang</button>
                <button id="skip-question-btn" class="btn-secondary">Lewati Soal</button>
                <button id="unanswered-btn" class="btn-warning">Soal Belum Dijawab</button>
            </div>
            
            <div id="time-warning" class="time-warning">
                <p>Perhatian! Ujian akan berakhir dalam waktu <span id="remaining-minutes">10</span> menit. Mohon pastikan semua jawaban telah diselesaikan dan diperiksa sebelum waktu habis. Terima kasih atas partisipasi Anda.</p>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-container">
                <h2>Hasil Ujian Anda</h2>
                <div class="score-container">
                    <div class="score-circle">
                        <span id="score-percentage">0</span>%
                    </div>
                    <div class="score-details">
                        <p>Total Soal: <span id="total-questions-result">0</span></p>
                        <p>Jawaban Benar: <span id="correct-answers">0</span></p>
                        <p>Jawaban Salah: <span id="wrong-answers">0</span></p>
                        <p>Nilai: <span id="final-score">0</span></p>
                    </div>
                </div>
                
                <div class="certificate-preview" id="certificate-preview">
                    <img src="assets/images/certificate.png" alt="Sertifikat" style="max-width: 100%; display: none;">
                    <canvas id="certificate-canvas"></canvas>
                </div>
                
                <div class="result-actions">
                    <button id="print-certificate-btn" class="btn-primary">Cetak Sertifikat</button>
                    <button id="retry-exam-btn" class="btn-secondary">Ulangi Ujian</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Bagikan Ujian Ini</h3>
            <div class="social-share">
                <button class="social-btn facebook"><i class="fab fa-facebook-f"></i> Facebook</button>
                <button class="social-btn twitter"><i class="fab fa-twitter"></i> Twitter</button>
                <button class="social-btn whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</button>
                <button class="social-btn telegram"><i class="fab fa-telegram"></i> Telegram</button>
                <button class="social-btn copy-link"><i class="fas fa-copy"></i> Salin Tautan</button>
            </div>
        </div>
    </div>

    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Panel Admin</h3>
            <div class="admin-form">
                <input type="password" id="admin-code" placeholder="Masukkan Kode Admin" class="input-field">
                <button id="admin-login-btn" class="btn-primary">Masuk</button>
            </div>
        </div>
    </div>

    <div id="question-bank-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Bank Soal</h3>
            <div class="question-bank-form">
                <input type="password" id="question-bank-code" placeholder="Masukkan Kode Bank Soal" class="input-field">
                <button id="question-bank-login-btn" class="btn-primary">Masuk</button>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="opening-audio" src="assets/audio/opening.mp3" preload="auto"></audio>
    <audio id="correct-audio" src="assets/audio/jawabanbenar.mp3" preload="auto"></audio>
    <audio id="wrong-audio" src="assets/audio/jawabansalah.mp3" preload="auto"></audio>
    <audio id="applause-audio" src="assets/audio/applause.mp3" preload="auto"></audio>
    <audio id="button-audio" src="assets/audio/audiotombol.mp3" preload="auto"></audio>

    <script src="assets/js/particles.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/quiz-engine.js"></script>
    <script src="assets/js/admin.js"></script>
</body>
</html>
